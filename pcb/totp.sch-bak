EESchema Schematic File Version 4
EELAYER 30 0
EELAYER END
$Descr A4 11693 8268
encoding utf-8
Sheet 1 1
Title "TOTP Token"
Date ""
Rev ""
Comp "Rasmus Bondesson"
Comment1 ""
Comment2 ""
Comment3 ""
Comment4 ""
$EndDescr
$Comp
L Timer_RTC:DS3231M U6
U 1 1 604BB822
P 7950 5350
F 0 "U6" H 7600 5700 50  0000 C CNN
F 1 "DS3231M" H 8200 5700 50  0000 C CNN
F 2 "Package_SO:SOIC-16W_7.5x10.3mm_P1.27mm" H 7950 4750 50  0001 C CNN
F 3 "http://datasheets.maximintegrated.com/en/ds/DS3231.pdf" H 8220 5400 50  0001 C CNN
	1    7950 5350
	1    0    0    -1  
$EndComp
$Comp
L power:+3.3V #PWR018
U 1 1 604CAA52
P 3200 3000
F 0 "#PWR018" H 3200 2850 50  0001 C CNN
F 1 "+3.3V" H 3215 3173 50  0000 C CNN
F 2 "" H 3200 3000 50  0001 C CNN
F 3 "" H 3200 3000 50  0001 C CNN
	1    3200 3000
	1    0    0    -1  
$EndComp
Wire Wire Line
	2800 3100 2900 3100
Wire Wire Line
	3200 3100 3200 3000
$Comp
L power:GND #PWR011
U 1 1 604CD4F2
P 2200 1600
F 0 "#PWR011" H 2200 1350 50  0001 C CNN
F 1 "GND" H 2205 1427 50  0000 C CNN
F 2 "" H 2200 1600 50  0001 C CNN
F 3 "" H 2200 1600 50  0001 C CNN
	1    2200 1600
	1    0    0    -1  
$EndComp
Wire Wire Line
	2200 1600 2200 1500
$Comp
L power:GND #PWR023
U 1 1 604CFC40
P 4650 1300
F 0 "#PWR023" H 4650 1050 50  0001 C CNN
F 1 "GND" H 4655 1127 50  0000 C CNN
F 2 "" H 4650 1300 50  0001 C CNN
F 3 "" H 4650 1300 50  0001 C CNN
	1    4650 1300
	1    0    0    -1  
$EndComp
Wire Wire Line
	4550 1200 4650 1200
Wire Wire Line
	4650 1200 4650 1300
Wire Wire Line
	4650 1000 4650 1100
Wire Wire Line
	4650 1100 4550 1100
$Comp
L totp:VBAT #PWR022
U 1 1 604D537D
P 4650 1000
F 0 "#PWR022" H 4650 850 50  0001 C CNN
F 1 "VBAT" H 4665 1173 50  0000 C CNN
F 2 "" H 4650 1000 50  0001 C CNN
F 3 "" H 4650 1000 50  0001 C CNN
	1    4650 1000
	1    0    0    -1  
$EndComp
$Comp
L totp:VBAT #PWR014
U 1 1 604D5A34
P 3150 1050
F 0 "#PWR014" H 3150 900 50  0001 C CNN
F 1 "VBAT" H 3165 1223 50  0000 C CNN
F 2 "" H 3150 1050 50  0001 C CNN
F 3 "" H 3150 1050 50  0001 C CNN
	1    3150 1050
	1    0    0    -1  
$EndComp
Wire Wire Line
	2600 1300 2700 1300
Wire Wire Line
	1650 1300 1800 1300
$Comp
L power:GND #PWR07
U 1 1 6052453E
P 1650 1800
F 0 "#PWR07" H 1650 1550 50  0001 C CNN
F 1 "GND" H 1655 1627 50  0000 C CNN
F 2 "" H 1650 1800 50  0001 C CNN
F 3 "" H 1650 1800 50  0001 C CNN
	1    1650 1800
	1    0    0    -1  
$EndComp
$Comp
L Transistor_FET:BSS84 Q1
U 1 1 6053D288
P 1550 2800
F 0 "Q1" H 1754 2846 50  0000 L CNN
F 1 "BSS84" H 1754 2755 50  0000 L CNN
F 2 "Package_TO_SOT_SMD:SOT-23" H 1750 2725 50  0001 L CIN
F 3 "http://assets.nexperia.com/documents/data-sheet/BSS84.pdf" H 1550 2800 50  0001 L CNN
	1    1550 2800
	1    0    0    -1  
$EndComp
Wire Wire Line
	1650 3100 1650 3000
Wire Wire Line
	1150 2800 1350 2800
Wire Wire Line
	1150 2800 1150 3100
Connection ~ 1150 3100
$Comp
L power:GND #PWR04
U 1 1 6054847B
P 1150 3600
F 0 "#PWR04" H 1150 3350 50  0001 C CNN
F 1 "GND" H 1155 3427 50  0000 C CNN
F 2 "" H 1150 3600 50  0001 C CNN
F 3 "" H 1150 3600 50  0001 C CNN
	1    1150 3600
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR012
U 1 1 60549816
P 2500 3600
F 0 "#PWR012" H 2500 3350 50  0001 C CNN
F 1 "GND" H 2505 3427 50  0000 C CNN
F 2 "" H 2500 3600 50  0001 C CNN
F 3 "" H 2500 3600 50  0001 C CNN
	1    2500 3600
	1    0    0    -1  
$EndComp
Wire Wire Line
	2500 3600 2500 3500
Wire Wire Line
	1650 3100 1900 3100
Connection ~ 1650 3100
Wire Wire Line
	2100 3600 2100 3200
Wire Wire Line
	2100 3200 2200 3200
$Comp
L power:GND #PWR09
U 1 1 6055B51F
P 1650 3600
F 0 "#PWR09" H 1650 3350 50  0001 C CNN
F 1 "GND" H 1655 3427 50  0000 C CNN
F 2 "" H 1650 3600 50  0001 C CNN
F 3 "" H 1650 3600 50  0001 C CNN
	1    1650 3600
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR06
U 1 1 60580FDF
P 1250 1450
F 0 "#PWR06" H 1250 1200 50  0001 C CNN
F 1 "GND" H 1255 1277 50  0000 C CNN
F 2 "" H 1250 1450 50  0001 C CNN
F 3 "" H 1250 1450 50  0001 C CNN
	1    1250 1450
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR013
U 1 1 60581400
P 2900 3600
F 0 "#PWR013" H 2900 3350 50  0001 C CNN
F 1 "GND" H 2905 3427 50  0000 C CNN
F 2 "" H 2900 3600 50  0001 C CNN
F 3 "" H 2900 3600 50  0001 C CNN
	1    2900 3600
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR019
U 1 1 605815D6
P 3200 3600
F 0 "#PWR019" H 3200 3350 50  0001 C CNN
F 1 "GND" H 3205 3427 50  0000 C CNN
F 2 "" H 3200 3600 50  0001 C CNN
F 3 "" H 3200 3600 50  0001 C CNN
	1    3200 3600
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR020
U 1 1 60591DD5
P 4500 4350
F 0 "#PWR020" H 4500 4100 50  0001 C CNN
F 1 "GND" H 4505 4177 50  0000 C CNN
F 2 "" H 4500 4350 50  0001 C CNN
F 3 "" H 4500 4350 50  0001 C CNN
	1    4500 4350
	1    0    0    -1  
$EndComp
Wire Wire Line
	4600 4250 4500 4250
Wire Wire Line
	4500 4250 4500 4350
$Comp
L power:+3.3V #PWR021
U 1 1 6059D76B
P 4550 5350
F 0 "#PWR021" H 4550 5200 50  0001 C CNN
F 1 "+3.3V" H 4565 5523 50  0000 C CNN
F 2 "" H 4550 5350 50  0001 C CNN
F 3 "" H 4550 5350 50  0001 C CNN
	1    4550 5350
	1    0    0    -1  
$EndComp
Wire Wire Line
	4550 5350 4550 5400
Connection ~ 3200 3100
Connection ~ 2900 3100
Wire Wire Line
	2900 3100 3200 3100
Wire Wire Line
	3150 1100 3150 1050
Connection ~ 3150 1100
$Comp
L power:GND #PWR015
U 1 1 605F3176
P 3150 1450
F 0 "#PWR015" H 3150 1200 50  0001 C CNN
F 1 "GND" H 3155 1277 50  0000 C CNN
F 2 "" H 3150 1450 50  0001 C CNN
F 3 "" H 3150 1450 50  0001 C CNN
	1    3150 1450
	1    0    0    -1  
$EndComp
Connection ~ 1250 1100
$Comp
L power:GND #PWR035
U 1 1 606518F9
P 7950 5800
F 0 "#PWR035" H 7950 5550 50  0001 C CNN
F 1 "GND" H 7955 5627 50  0000 C CNN
F 2 "" H 7950 5800 50  0001 C CNN
F 3 "" H 7950 5800 50  0001 C CNN
	1    7950 5800
	1    0    0    -1  
$EndComp
$Comp
L totp:QDSP-6064 DS1
U 1 1 6066AE75
P 9550 1600
F 0 "DS1" H 9550 2267 50  0000 C CNN
F 1 "QDSP-6064" H 9550 2176 50  0000 C CNN
F 2 "Package_DIP:DIP-12_W7.62mm_Socket_LongPads" H 9550 1000 50  0001 C CNN
F 3 "https://cdn.sparkfun.com/datasheets/Components/LED/BB_QDSP_DS.pdf" H 9120 1630 50  0001 C CNN
	1    9550 1600
	1    0    0    -1  
$EndComp
$Comp
L totp:QDSP-6064 DS2
U 1 1 60672A86
P 9550 3050
F 0 "DS2" H 9550 3717 50  0000 C CNN
F 1 "QDSP-6064" H 9550 3626 50  0000 C CNN
F 2 "Package_DIP:DIP-12_W7.62mm_Socket_LongPads" H 9550 2450 50  0001 C CNN
F 3 "https://cdn.sparkfun.com/datasheets/Components/LED/BB_QDSP_DS.pdf" H 9120 3080 50  0001 C CNN
	1    9550 3050
	1    0    0    -1  
$EndComp
$Comp
L totp:MCP73831-2-OT U1
U 1 1 604D1BFE
P 2200 1200
F 0 "U1" H 2200 1567 50  0000 C CNN
F 1 "MCP73832T-2ACI/OT " H 2200 1476 50  0000 C CNN
F 2 "Package_TO_SOT_SMD:SOT-23-5" H 2250 950 50  0001 L CIN
F 3 "http://ww1.microchip.com/downloads/en/DeviceDoc/20001984g.pdf" H 2050 1150 50  0001 C CNN
	1    2200 1200
	1    0    0    -1  
$EndComp
Wire Wire Line
	1250 1100 1800 1100
Text Label 7450 2150 0    50   ~ 0
SEGA
Text Label 7450 2250 0    50   ~ 0
SEGB
Text Label 7450 2350 0    50   ~ 0
SEGC
Text Label 7450 2450 0    50   ~ 0
SEGD
Text Label 7450 2550 0    50   ~ 0
SEGE
Text Label 7450 2650 0    50   ~ 0
SEGF
Text Label 7450 2750 0    50   ~ 0
SEGG
Text Label 7450 2850 0    50   ~ 0
SEGDP
Text Label 8450 2700 2    50   ~ 0
SEGA
Text Label 8450 2800 2    50   ~ 0
SEGB
Text Label 8450 2900 2    50   ~ 0
SEGC
Text Label 8450 3000 2    50   ~ 0
SEGD
Text Label 8450 3100 2    50   ~ 0
SEGE
Text Label 8450 3200 2    50   ~ 0
SEGF
Text Label 8450 3300 2    50   ~ 0
SEGG
Text Label 8450 3400 2    50   ~ 0
SEGDP
Wire Wire Line
	7700 2850 7450 2850
Wire Wire Line
	7450 2750 7700 2750
Wire Wire Line
	7700 2650 7450 2650
Wire Wire Line
	7450 2550 7700 2550
Wire Wire Line
	7700 2450 7450 2450
Wire Wire Line
	7450 2350 7700 2350
Wire Wire Line
	7700 2250 7450 2250
Wire Wire Line
	7450 2150 7700 2150
Wire Wire Line
	8450 3400 8200 3400
Wire Wire Line
	8200 3300 8450 3300
Wire Wire Line
	8450 3200 8200 3200
Wire Wire Line
	8450 3100 8200 3100
Wire Wire Line
	8450 3000 8200 3000
Wire Wire Line
	8450 2900 8200 2900
Wire Wire Line
	8450 2800 8200 2800
Wire Wire Line
	8450 2700 8200 2700
Text Label 8450 1250 2    50   ~ 0
SEGA
Text Label 8450 1350 2    50   ~ 0
SEGB
Text Label 8450 1450 2    50   ~ 0
SEGC
Text Label 8450 1550 2    50   ~ 0
SEGD
Text Label 8450 1650 2    50   ~ 0
SEGE
Text Label 8450 1750 2    50   ~ 0
SEGF
Text Label 8450 1850 2    50   ~ 0
SEGG
Text Label 8450 1950 2    50   ~ 0
SEGDP
Wire Wire Line
	8200 1250 8450 1250
Wire Wire Line
	8200 1950 8450 1950
Wire Wire Line
	8450 1850 8200 1850
Wire Wire Line
	8450 1750 8200 1750
Wire Wire Line
	8450 1650 8200 1650
Wire Wire Line
	8450 1550 8200 1550
Wire Wire Line
	8450 1450 8200 1450
Wire Wire Line
	8450 1350 8200 1350
Entry Wire Line
	8200 1250 8100 1350
Entry Wire Line
	8200 1350 8100 1450
Entry Wire Line
	8200 1450 8100 1550
Entry Wire Line
	8200 1550 8100 1650
Entry Wire Line
	8200 1650 8100 1750
Entry Wire Line
	8200 1750 8100 1850
Entry Wire Line
	8200 1850 8100 1950
Entry Wire Line
	8200 1950 8100 2050
Entry Wire Line
	8200 2700 8100 2800
Entry Wire Line
	8200 2800 8100 2900
Entry Wire Line
	8200 2900 8100 3000
Entry Wire Line
	8200 3000 8100 3100
Entry Wire Line
	8200 3100 8100 3200
Entry Wire Line
	8200 3200 8100 3300
Entry Wire Line
	8200 3300 8100 3400
Entry Wire Line
	8200 3400 8100 3500
Entry Wire Line
	7700 2150 7800 2250
Entry Wire Line
	7700 2250 7800 2350
Entry Wire Line
	7700 2350 7800 2450
Entry Wire Line
	7700 2450 7800 2550
Entry Wire Line
	7700 2550 7800 2650
Entry Wire Line
	7700 2650 7800 2750
Entry Wire Line
	7700 2750 7800 2850
Entry Wire Line
	7700 2850 7800 2950
Text Label 7450 1250 0    50   ~ 0
DIG0
Text Label 7450 1350 0    50   ~ 0
DIG1
Text Label 7450 1450 0    50   ~ 0
DIG2
Text Label 7450 1550 0    50   ~ 0
DIG3
Text Label 7450 1650 0    50   ~ 0
DIG4
Text Label 7450 1750 0    50   ~ 0
DIG5
Text Label 7450 1850 0    50   ~ 0
DIG6
Text Label 7450 1950 0    50   ~ 0
DIG7
Wire Wire Line
	7450 1950 7700 1950
Wire Wire Line
	7700 1850 7450 1850
Wire Wire Line
	7450 1750 7700 1750
Wire Wire Line
	7700 1650 7450 1650
Wire Wire Line
	7450 1550 7700 1550
Wire Wire Line
	7700 1450 7450 1450
Wire Wire Line
	7450 1350 7700 1350
Wire Wire Line
	7700 1250 7450 1250
Entry Wire Line
	7700 1950 7800 1850
Entry Wire Line
	7700 1850 7800 1750
Entry Wire Line
	7700 1750 7800 1650
Entry Wire Line
	7700 1650 7800 1550
Entry Wire Line
	7700 1550 7800 1450
Entry Wire Line
	7700 1450 7800 1350
Entry Wire Line
	7700 1350 7800 1250
Entry Wire Line
	7700 1250 7800 1150
Text Label 10650 1650 0    50   ~ 0
DIG0
Text Label 10650 1750 0    50   ~ 0
DIG1
Text Label 10650 1850 0    50   ~ 0
DIG2
Text Label 10650 1950 0    50   ~ 0
DIG3
Text Label 10650 3100 0    50   ~ 0
DIG4
Text Label 10650 3200 0    50   ~ 0
DIG5
Text Label 10650 3300 0    50   ~ 0
DIG6
Text Label 10650 3400 0    50   ~ 0
DIG7
Wire Wire Line
	10650 1650 10850 1650
Wire Wire Line
	10850 1750 10650 1750
Wire Wire Line
	10650 1850 10850 1850
Wire Wire Line
	10650 1950 10850 1950
Wire Wire Line
	10650 3100 10850 3100
Wire Wire Line
	10850 3200 10650 3200
Wire Wire Line
	10650 3300 10850 3300
Wire Wire Line
	10650 3400 10850 3400
Entry Wire Line
	10850 3400 10950 3300
Entry Wire Line
	10850 3300 10950 3200
Entry Wire Line
	10850 3200 10950 3100
Entry Wire Line
	10850 3100 10950 3000
Entry Wire Line
	10850 1950 10950 1850
Entry Wire Line
	10850 1850 10950 1750
Entry Wire Line
	10850 1750 10950 1650
Entry Wire Line
	10850 1650 10950 1550
Wire Bus Line
	10950 700  7800 700 
NoConn ~ 7450 3050
$Comp
L power:GND #PWR033
U 1 1 60628E1A
P 6900 3350
F 0 "#PWR033" H 6900 3100 50  0001 C CNN
F 1 "GND" H 6905 3177 50  0000 C CNN
F 2 "" H 6900 3350 50  0001 C CNN
F 3 "" H 6900 3350 50  0001 C CNN
	1    6900 3350
	1    0    0    -1  
$EndComp
Wire Wire Line
	6850 3250 6900 3250
Wire Wire Line
	6900 3250 6900 3350
Connection ~ 6900 3250
Wire Wire Line
	6900 3250 6950 3250
Wire Wire Line
	1250 1050 1250 1100
$Comp
L totp:VBUS #PWR05
U 1 1 60525A44
P 1250 1050
F 0 "#PWR05" H 1250 900 50  0001 C CNN
F 1 "VBUS" H 1265 1223 50  0000 C CNN
F 2 "" H 1250 1050 50  0001 C CNN
F 3 "" H 1250 1050 50  0001 C CNN
	1    1250 1050
	1    0    0    -1  
$EndComp
$Comp
L Device:CP_Small C1
U 1 1 60653B50
P 1250 1300
F 0 "C1" H 1338 1346 50  0000 L CNN
F 1 "10uF" H 1338 1255 50  0000 L CNN
F 2 "" H 1250 1300 50  0001 C CNN
F 3 "~" H 1250 1300 50  0001 C CNN
	1    1250 1300
	1    0    0    -1  
$EndComp
Wire Wire Line
	1250 1100 1250 1200
Wire Wire Line
	1250 1400 1250 1450
$Comp
L Device:R_Small R2
U 1 1 60660A60
P 1650 1550
F 0 "R2" H 1709 1596 50  0000 L CNN
F 1 "10k" H 1709 1505 50  0000 L CNN
F 2 "" H 1650 1550 50  0001 C CNN
F 3 "~" H 1650 1550 50  0001 C CNN
	1    1650 1550
	1    0    0    -1  
$EndComp
Wire Wire Line
	1650 1300 1650 1450
Wire Wire Line
	1650 1650 1650 1800
$Comp
L Device:CP_Small C4
U 1 1 6066C405
P 3150 1300
F 0 "C4" H 3238 1346 50  0000 L CNN
F 1 "10uF" H 3238 1255 50  0000 L CNN
F 2 "" H 3150 1300 50  0001 C CNN
F 3 "~" H 3150 1300 50  0001 C CNN
	1    3150 1300
	1    0    0    -1  
$EndComp
Wire Wire Line
	3150 1400 3150 1450
Wire Wire Line
	3150 1100 3150 1200
$Comp
L Device:R_Small R1
U 1 1 606782D0
P 1150 3350
F 0 "R1" H 1209 3396 50  0000 L CNN
F 1 "100k" H 1209 3305 50  0000 L CNN
F 2 "" H 1150 3350 50  0001 C CNN
F 3 "~" H 1150 3350 50  0001 C CNN
	1    1150 3350
	1    0    0    -1  
$EndComp
Wire Wire Line
	1150 3100 1150 3250
Wire Wire Line
	1150 3450 1150 3600
$Comp
L Device:CP_Small C2
U 1 1 6068ED48
P 1650 3350
F 0 "C2" H 1738 3396 50  0000 L CNN
F 1 "10uF" H 1738 3305 50  0000 L CNN
F 2 "" H 1650 3350 50  0001 C CNN
F 3 "~" H 1650 3350 50  0001 C CNN
	1    1650 3350
	1    0    0    -1  
$EndComp
$Comp
L Device:CP_Small C3
U 1 1 6068F4BB
P 2900 3350
F 0 "C3" H 2988 3396 50  0000 L CNN
F 1 "10uF" H 2988 3305 50  0000 L CNN
F 2 "" H 2900 3350 50  0001 C CNN
F 3 "~" H 2900 3350 50  0001 C CNN
	1    2900 3350
	1    0    0    -1  
$EndComp
Wire Wire Line
	1650 3100 1650 3250
Wire Wire Line
	1650 3450 1650 3600
Wire Wire Line
	2900 3100 2900 3250
Wire Wire Line
	2900 3450 2900 3600
$Comp
L Device:CP_Small C5
U 1 1 606AC173
P 3200 3350
F 0 "C5" H 3288 3396 50  0000 L CNN
F 1 "1uF" H 3288 3305 50  0000 L CNN
F 2 "" H 3200 3350 50  0001 C CNN
F 3 "~" H 3200 3350 50  0001 C CNN
	1    3200 3350
	1    0    0    -1  
$EndComp
Wire Wire Line
	3200 3100 3200 3250
Wire Wire Line
	3200 3450 3200 3600
$Comp
L Device:R_Small R4
U 1 1 606B7D2E
P 1900 3350
F 0 "R4" H 1959 3396 50  0000 L CNN
F 1 "100k" H 1959 3305 50  0000 L CNN
F 2 "" H 1900 3350 50  0001 C CNN
F 3 "~" H 1900 3350 50  0001 C CNN
	1    1900 3350
	1    0    0    -1  
$EndComp
Wire Wire Line
	1900 3100 1900 3250
Wire Wire Line
	1900 3450 1900 3600
$Comp
L Device:D_Schottky_Small D1
U 1 1 606CBE1E
P 1400 3100
F 0 "D1" H 1400 2893 50  0000 C CNN
F 1 "D_Schottky_Small" H 1400 2984 50  0000 C CNN
F 2 "" V 1400 3100 50  0001 C CNN
F 3 "~" V 1400 3100 50  0001 C CNN
	1    1400 3100
	-1   0    0    1   
$EndComp
Wire Wire Line
	1150 3100 1300 3100
Wire Wire Line
	1500 3100 1650 3100
NoConn ~ 8450 5450
NoConn ~ 8450 5150
$Comp
L Transistor_FET:BSS84 Q2
U 1 1 607497CD
P 4550 2700
F 0 "Q2" H 4754 2746 50  0000 L CNN
F 1 "BSS84" H 4754 2655 50  0000 L CNN
F 2 "Package_TO_SOT_SMD:SOT-23" H 4750 2625 50  0001 L CIN
F 3 "http://assets.nexperia.com/documents/data-sheet/BSS84.pdf" H 4550 2700 50  0001 L CNN
	1    4550 2700
	1    0    0    -1  
$EndComp
$Comp
L power:+3.3V #PWR024
U 1 1 6074A6E0
P 4650 2200
F 0 "#PWR024" H 4650 2050 50  0001 C CNN
F 1 "+3.3V" H 4665 2373 50  0000 C CNN
F 2 "" H 4650 2200 50  0001 C CNN
F 3 "" H 4650 2200 50  0001 C CNN
	1    4650 2200
	1    0    0    -1  
$EndComp
$Comp
L Device:R_Small R6
U 1 1 60768FEE
P 4350 2500
F 0 "R6" H 4409 2546 50  0000 L CNN
F 1 "100k" H 4409 2455 50  0000 L CNN
F 2 "" H 4350 2500 50  0001 C CNN
F 3 "~" H 4350 2500 50  0001 C CNN
	1    4350 2500
	1    0    0    -1  
$EndComp
$Comp
L totp:VPERI #PWR027
U 1 1 6078A0D7
P 5150 2900
F 0 "#PWR027" H 5150 2750 50  0001 C CNN
F 1 "VPERI" H 5165 3073 50  0000 C CNN
F 2 "" H 5150 2900 50  0001 C CNN
F 3 "" H 5150 2900 50  0001 C CNN
	1    5150 2900
	1    0    0    -1  
$EndComp
Wire Wire Line
	4350 2700 4350 2600
Wire Wire Line
	4350 2300 4350 2400
Wire Wire Line
	4650 2300 4650 2500
Wire Wire Line
	4350 2300 4650 2300
Wire Wire Line
	4650 2200 4650 2300
Connection ~ 4650 2300
Wire Wire Line
	4650 2900 4650 3000
Wire Wire Line
	1900 3600 2100 3600
Wire Wire Line
	1900 3100 2200 3100
Connection ~ 1900 3100
$Comp
L Device:R_Small R9
U 1 1 608D36CB
P 6150 1100
F 0 "R9" H 6209 1146 50  0000 L CNN
F 1 "10k" H 6209 1055 50  0000 L CNN
F 2 "" H 6150 1100 50  0001 C CNN
F 3 "~" H 6150 1100 50  0001 C CNN
	1    6150 1100
	1    0    0    -1  
$EndComp
Wire Wire Line
	6900 1050 6900 950 
Wire Wire Line
	6900 950  6150 950 
Wire Wire Line
	6150 950  6150 1000
Wire Wire Line
	6900 850  6900 950 
Connection ~ 6900 950 
$Comp
L totp:VPERI #PWR032
U 1 1 608E8A46
P 6900 850
F 0 "#PWR032" H 6900 700 50  0001 C CNN
F 1 "VPERI" H 6915 1023 50  0000 C CNN
F 2 "" H 6900 850 50  0001 C CNN
F 3 "" H 6900 850 50  0001 C CNN
	1    6900 850 
	1    0    0    -1  
$EndComp
Wire Wire Line
	6150 1200 6150 1250
Wire Wire Line
	6150 1250 6350 1250
Text Label 6300 3050 2    50   ~ 0
SCK
Text Label 6300 2850 2    50   ~ 0
MOSI
Text Label 6300 2950 2    50   ~ 0
SS
NoConn ~ 7450 5550
Text Notes 7900 1800 1    50   ~ 0
DIGITS/CATHODES
Text Notes 7900 3000 1    50   ~ 0
SEGMENTS/ANODES
Wire Wire Line
	7950 5800 7950 5750
$Comp
L totp:VBUS #PWR01
U 1 1 6059C5F9
P 1000 4500
F 0 "#PWR01" H 1000 4350 50  0001 C CNN
F 1 "VBUS" H 1015 4673 50  0000 C CNN
F 2 "" H 1000 4500 50  0001 C CNN
F 3 "" H 1000 4500 50  0001 C CNN
	1    1000 4500
	1    0    0    -1  
$EndComp
NoConn ~ 1600 5750
Wire Wire Line
	1800 5450 1600 5450
NoConn ~ 1600 5650
Wire Wire Line
	1600 5150 1600 5050
Wire Wire Line
	1600 4850 1600 4950
$Comp
L power:GND #PWR02
U 1 1 604C71E8
P 1000 6100
F 0 "#PWR02" H 1000 5850 50  0001 C CNN
F 1 "GND" H 1005 5927 50  0000 C CNN
F 2 "" H 1000 6100 50  0001 C CNN
F 3 "" H 1000 6100 50  0001 C CNN
	1    1000 6100
	1    0    0    -1  
$EndComp
$Comp
L totp:USB_C_Receptacle_USB2.0 J1
U 1 1 60601BFE
P 1000 5300
F 0 "J1" H 700 5900 50  0000 R CNN
F 1 "USB_C_Receptacle_USB2.0" H 2050 5900 50  0000 R CNN
F 2 "totp:USB_C_Receptacle_JAE_DX07S016JA1" H 1150 5800 50  0001 C CNN
F 3 "https://www.usb.org/sites/default/files/documents/usb_type-c.zip" H 1150 5800 50  0001 C CNN
	1    1000 5300
	1    0    0    -1  
$EndComp
$Comp
L Device:R_Small R8
U 1 1 606F9B6C
P 4750 5050
F 0 "R8" V 4554 5050 50  0000 C CNN
F 1 "22" V 4645 5050 50  0000 C CNN
F 2 "" H 4750 5050 50  0001 C CNN
F 3 "~" H 4750 5050 50  0001 C CNN
	1    4750 5050
	0    1    1    0   
$EndComp
$Comp
L Device:R_Small R7
U 1 1 606F99A8
P 4750 4950
F 0 "R7" V 4554 4950 50  0000 C CNN
F 1 "22" V 4645 4950 50  0000 C CNN
F 2 "" H 4750 4950 50  0001 C CNN
F 3 "~" H 4750 4950 50  0001 C CNN
	1    4750 4950
	0    1    1    0   
$EndComp
$Comp
L power:+3.3V #PWR029
U 1 1 604CC1DF
P 5600 3550
F 0 "#PWR029" H 5600 3400 50  0001 C CNN
F 1 "+3.3V" H 5615 3723 50  0000 C CNN
F 2 "" H 5600 3550 50  0001 C CNN
F 3 "" H 5600 3550 50  0001 C CNN
	1    5600 3550
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR028
U 1 1 604D7F91
P 5500 7350
F 0 "#PWR028" H 5500 7100 50  0001 C CNN
F 1 "GND" H 5505 7177 50  0000 C CNN
F 2 "" H 5500 7350 50  0001 C CNN
F 3 "" H 5500 7350 50  0001 C CNN
	1    5500 7350
	1    0    0    -1  
$EndComp
$Comp
L Device:Resonator Y1
U 1 1 6058DBB9
P 4800 4250
F 0 "Y1" V 4754 4360 50  0000 L CNN
F 1 "8MHz" V 4845 4360 50  0000 L CNN
F 2 "" H 4775 4250 50  0001 C CNN
F 3 "~" H 4775 4250 50  0001 C CNN
	1    4800 4250
	0    1    1    0   
$EndComp
Wire Wire Line
	4800 4400 4800 4450
Wire Wire Line
	4800 4450 4900 4450
Wire Wire Line
	4900 4450 4900 4350
Wire Wire Line
	4900 4350 4950 4350
Wire Wire Line
	4800 4100 4800 4050
Wire Wire Line
	4800 4050 4900 4050
Wire Wire Line
	4900 4050 4900 4150
Wire Wire Line
	4900 4150 4950 4150
$Comp
L power:GND #PWR026
U 1 1 6059B137
P 4700 5850
F 0 "#PWR026" H 4700 5600 50  0001 C CNN
F 1 "GND" H 4705 5677 50  0000 C CNN
F 2 "" H 4700 5850 50  0001 C CNN
F 3 "" H 4700 5850 50  0001 C CNN
	1    4700 5850
	1    0    0    -1  
$EndComp
Wire Wire Line
	4550 5400 4700 5400
Wire Wire Line
	4950 5250 4850 5250
Wire Wire Line
	4850 5250 4850 5400
Wire Wire Line
	4850 5400 4700 5400
Connection ~ 4700 5400
NoConn ~ 5450 3650
$Comp
L Device:CP_Small C6
U 1 1 60711328
P 4700 5700
F 0 "C6" H 4788 5746 50  0000 L CNN
F 1 "1uF" H 4788 5655 50  0000 L CNN
F 2 "" H 4700 5700 50  0001 C CNN
F 3 "~" H 4700 5700 50  0001 C CNN
	1    4700 5700
	1    0    0    -1  
$EndComp
Wire Wire Line
	4700 5400 4700 5600
Wire Wire Line
	4700 5800 4700 5850
Text Label 6200 4050 0    50   ~ 0
SCK
Text Label 6200 4150 0    50   ~ 0
MOSI
Text Label 6200 3950 0    50   ~ 0
SS
$Comp
L Device:R_Small R10
U 1 1 60BC8555
P 6350 6000
F 0 "R10" H 6409 6046 50  0000 L CNN
F 1 "100k" H 6409 5955 50  0000 L CNN
F 2 "" H 6350 6000 50  0001 C CNN
F 3 "~" H 6350 6000 50  0001 C CNN
	1    6350 6000
	1    0    0    -1  
$EndComp
$Comp
L Device:R_Small R11
U 1 1 60BC88BF
P 6350 6300
F 0 "R11" H 6409 6346 50  0000 L CNN
F 1 "100k" H 6409 6255 50  0000 L CNN
F 2 "" H 6350 6300 50  0001 C CNN
F 3 "~" H 6350 6300 50  0001 C CNN
	1    6350 6300
	1    0    0    -1  
$EndComp
$Comp
L totp:VBAT #PWR030
U 1 1 60BCA18E
P 6350 5850
F 0 "#PWR030" H 6350 5700 50  0001 C CNN
F 1 "VBAT" H 6365 6023 50  0000 C CNN
F 2 "" H 6350 5850 50  0001 C CNN
F 3 "" H 6350 5850 50  0001 C CNN
	1    6350 5850
	1    0    0    -1  
$EndComp
Wire Wire Line
	6350 5850 6350 5900
Wire Wire Line
	6350 6400 6350 6450
Wire Wire Line
	4850 4950 4950 4950
Wire Wire Line
	4850 5050 4950 5050
Wire Wire Line
	2000 5350 2000 5550
Wire Wire Line
	2000 5750 2000 5800
$Comp
L Device:R_Small R5
U 1 1 606D7FA2
P 2000 5650
F 0 "R5" H 2059 5696 50  0000 L CNN
F 1 "5.1k" H 2059 5605 50  0000 L CNN
F 2 "" H 2000 5650 50  0001 C CNN
F 3 "~" H 2000 5650 50  0001 C CNN
	1    2000 5650
	1    0    0    -1  
$EndComp
Connection ~ 1900 5800
Wire Wire Line
	2000 5800 1900 5800
Wire Wire Line
	1900 5800 1900 5850
Wire Wire Line
	1800 5800 1900 5800
$Comp
L power:GND #PWR010
U 1 1 604E7A33
P 1900 5850
F 0 "#PWR010" H 1900 5600 50  0001 C CNN
F 1 "GND" H 1905 5677 50  0000 C CNN
F 2 "" H 1900 5850 50  0001 C CNN
F 3 "" H 1900 5850 50  0001 C CNN
	1    1900 5850
	1    0    0    -1  
$EndComp
Wire Wire Line
	1800 5750 1800 5800
Wire Wire Line
	1800 5550 1800 5450
$Comp
L Device:R_Small R3
U 1 1 606D7C80
P 1800 5650
F 0 "R3" H 1859 5696 50  0000 L CNN
F 1 "5.1k" H 1859 5605 50  0000 L CNN
F 2 "" H 1800 5650 50  0001 C CNN
F 3 "~" H 1800 5650 50  0001 C CNN
	1    1800 5650
	1    0    0    -1  
$EndComp
Wire Wire Line
	1600 5350 2000 5350
$Comp
L totp:VBUS #PWR025
U 1 1 607B7839
P 4700 4650
F 0 "#PWR025" H 4700 4500 50  0001 C CNN
F 1 "VBUS" H 4715 4823 50  0000 C CNN
F 2 "" H 4700 4650 50  0001 C CNN
F 3 "" H 4700 4650 50  0001 C CNN
	1    4700 4650
	1    0    0    -1  
$EndComp
Wire Wire Line
	4700 4750 4700 4650
Wire Wire Line
	4700 4750 4950 4750
Wire Bus Line
	7800 3600 8100 3600
$Comp
L totp:AS1107WL-T U5
U 1 1 6094A5B2
P 6900 2150
F 0 "U5" H 6500 3200 50  0000 C CNN
F 1 "AS1107WL-T" H 7150 3200 50  0000 C CNN
F 2 "Package_SO:SOIC-24W_7.5x15.4mm_P1.27mm" H 6900 3700 50  0001 C CNN
F 3 "https://ams.com/documents/20143/36005/AS1106-07_DS000171_1-00.pdf" H 6900 3700 50  0001 C CNN
	1    6900 2150
	1    0    0    -1  
$EndComp
Wire Wire Line
	6350 6100 6350 6150
Wire Wire Line
	6250 6350 6250 6150
Connection ~ 6350 6150
Wire Wire Line
	6350 6150 6350 6200
Wire Wire Line
	6150 5150 7450 5150
Wire Wire Line
	6150 5250 7450 5250
Wire Wire Line
	1600 5050 2550 5050
Connection ~ 1600 5050
Wire Wire Line
	1600 4950 2550 4950
Connection ~ 1600 4950
Wire Wire Line
	6150 4050 6450 4050
Wire Wire Line
	6450 4050 6450 3450
Wire Wire Line
	6450 3450 5850 3450
Wire Wire Line
	5850 3450 5850 3050
Wire Wire Line
	5850 3050 6350 3050
Wire Wire Line
	6150 4150 6550 4150
Wire Wire Line
	6550 4150 6550 3350
Wire Wire Line
	6550 3350 5950 3350
Wire Wire Line
	5950 3350 5950 2850
Wire Wire Line
	5950 2850 6350 2850
Wire Wire Line
	6150 3950 6350 3950
Wire Wire Line
	6350 3950 6350 3250
Wire Wire Line
	6350 3250 6050 3250
Wire Wire Line
	6050 3250 6050 2950
Wire Wire Line
	6050 2950 6350 2950
Text GLabel 2700 1300 2    50   Output ~ 0
STAT
Wire Wire Line
	6150 6350 6250 6350
Wire Wire Line
	6250 6150 6350 6150
Wire Wire Line
	6150 6450 6350 6450
Wire Wire Line
	6700 5850 6700 5900
$Comp
L power:+3.3V #PWR031
U 1 1 60920C13
P 6700 5850
F 0 "#PWR031" H 6700 5700 50  0001 C CNN
F 1 "+3.3V" H 6715 6023 50  0000 C CNN
F 2 "" H 6700 5850 50  0001 C CNN
F 3 "" H 6700 5850 50  0001 C CNN
	1    6700 5850
	1    0    0    -1  
$EndComp
Wire Wire Line
	6700 6150 6700 6100
Wire Wire Line
	6800 6150 6700 6150
$Comp
L Device:R_Small R12
U 1 1 6089AE96
P 6700 6000
F 0 "R12" H 6759 6046 50  0000 L CNN
F 1 "100k" H 6759 5955 50  0000 L CNN
F 2 "" H 6700 6000 50  0001 C CNN
F 3 "~" H 6700 6000 50  0001 C CNN
	1    6700 6000
	1    0    0    -1  
$EndComp
Text GLabel 6800 6150 2    50   Input ~ 0
STAT
Wire Wire Line
	6700 6150 6700 6550
Wire Wire Line
	6700 6550 6150 6550
Connection ~ 6700 6150
Connection ~ 4350 2700
Wire Wire Line
	4250 2700 4350 2700
Text GLabel 4250 2700 0    50   Input ~ 0
~PERI_EN
Text GLabel 6250 4850 2    50   Output ~ 0
~PERI_EN
Wire Wire Line
	6150 4850 6250 4850
Wire Wire Line
	1650 2500 1650 2600
$Comp
L totp:VBAT #PWR08
U 1 1 6055EAC1
P 1650 2500
F 0 "#PWR08" H 1650 2350 50  0001 C CNN
F 1 "VBAT" H 1665 2673 50  0000 C CNN
F 2 "" H 1650 2500 50  0001 C CNN
F 3 "" H 1650 2500 50  0001 C CNN
	1    1650 2500
	1    0    0    -1  
$EndComp
Connection ~ 1150 2800
Wire Wire Line
	1150 2700 1150 2800
$Comp
L totp:VBUS #PWR03
U 1 1 60529812
P 1150 2700
F 0 "#PWR03" H 1150 2550 50  0001 C CNN
F 1 "VBUS" H 1165 2873 50  0000 C CNN
F 2 "" H 1150 2700 50  0001 C CNN
F 3 "" H 1150 2700 50  0001 C CNN
	1    1150 2700
	1    0    0    -1  
$EndComp
Wire Wire Line
	2600 1100 3150 1100
$Comp
L Connector_Generic:Conn_01x02 J2
U 1 1 604BFE60
P 4350 1200
F 0 "J2" H 4400 850 50  0000 R CNN
F 1 "Conn_01x02" H 4600 950 50  0000 R CNN
F 2 "Connector_JST:JST_PH_B2B-PH-SM4-TB_1x02-1MP_P2.00mm_Vertical" H 4350 1200 50  0001 C CNN
F 3 "~" H 4350 1200 50  0001 C CNN
	1    4350 1200
	-1   0    0    1   
$EndComp
$Comp
L totp:LDLN025M33R U2
U 1 1 60A73F50
P 2500 3200
F 0 "U2" H 2500 3542 50  0000 C CNN
F 1 "LDLN025M33R" H 2500 3451 50  0000 C CNN
F 2 "Package_TO_SOT_SMD:SOT-23-5" H 2500 3200 50  0001 C CNN
F 3 "" H 2500 3200 50  0001 C CNN
	1    2500 3200
	1    0    0    -1  
$EndComp
Text GLabel 2200 5350 2    50   Output ~ 0
CC1
Text GLabel 2200 5450 2    50   Output ~ 0
CC2
Wire Wire Line
	2200 5350 2000 5350
Connection ~ 2000 5350
Wire Wire Line
	2200 5450 1800 5450
Connection ~ 1800 5450
Text GLabel 6250 6750 2    50   Input ~ 0
CC1
Text GLabel 6250 6850 2    50   Input ~ 0
CC2
Wire Wire Line
	6250 6750 6150 6750
Wire Wire Line
	6150 6850 6250 6850
$Comp
L power:+3.3V #PWR036
U 1 1 60743670
P 8050 4850
F 0 "#PWR036" H 8050 4700 50  0001 C CNN
F 1 "+3.3V" H 8065 5023 50  0000 C CNN
F 2 "" H 8050 4850 50  0001 C CNN
F 3 "" H 8050 4850 50  0001 C CNN
	1    8050 4850
	1    0    0    -1  
$EndComp
$Comp
L totp:VPERI #PWR034
U 1 1 608E94C4
P 7750 4850
F 0 "#PWR034" H 7750 4700 50  0001 C CNN
F 1 "VPERI" H 7765 5023 50  0000 C CNN
F 2 "" H 7750 4850 50  0001 C CNN
F 3 "" H 7750 4850 50  0001 C CNN
	1    7750 4850
	1    0    0    -1  
$EndComp
Wire Wire Line
	7750 4850 7750 4900
Wire Wire Line
	7750 4900 7850 4900
Wire Wire Line
	7850 4900 7850 4950
Wire Wire Line
	7950 4950 7950 4900
Wire Wire Line
	7950 4900 8050 4900
Wire Wire Line
	8050 4900 8050 4850
$Comp
L MCU_Microchip_ATmega:ATmega32U4-AU U4
U 1 1 603E7D30
P 5550 5450
F 0 "U4" H 5100 7200 50  0000 C CNN
F 1 "ATmega32U4-AU" H 6000 7200 50  0000 C CNN
F 2 "Package_QFP:TQFP-44_10x10mm_P0.8mm" H 5550 5450 50  0001 C CIN
F 3 "http://ww1.microchip.com/downloads/en/DeviceDoc/Atmel-7766-8-bit-AVR-ATmega16U4-32U4_Datasheet.pdf" H 5550 5450 50  0001 C CNN
	1    5550 5450
	1    0    0    -1  
$EndComp
Wire Wire Line
	5450 7250 5450 7300
Wire Wire Line
	5450 7300 5500 7300
Wire Wire Line
	5500 7300 5500 7350
Wire Wire Line
	5500 7300 5550 7300
Wire Wire Line
	5550 7300 5550 7250
Connection ~ 5500 7300
Wire Wire Line
	5550 3650 5550 3600
Wire Wire Line
	5550 3600 5600 3600
Wire Wire Line
	5650 3600 5650 3650
Wire Wire Line
	5600 3600 5600 3550
Connection ~ 5600 3600
Wire Wire Line
	5600 3600 5650 3600
Wire Wire Line
	5150 3000 5150 2900
Wire Wire Line
	4650 3000 5150 3000
$Comp
L totp:MAX14636 U3
U 1 1 60C4FDEB
P 3150 4850
F 0 "U3" H 2700 5300 50  0000 C CNN
F 1 "MAX14636" H 3450 5300 50  0000 C CNN
F 2 "" H 3150 5900 50  0001 C CNN
F 3 "https://datasheets.maximintegrated.com/en/ds/MAX14576-MAX14637.pdf" H 3000 6100 50  0001 C CNN
	1    3150 4850
	1    0    0    -1  
$EndComp
Wire Wire Line
	3750 5050 4650 5050
Wire Wire Line
	3750 4950 4650 4950
$Comp
L totp:VBUS #PWR016
U 1 1 60C526B4
P 3150 4300
F 0 "#PWR016" H 3150 4150 50  0001 C CNN
F 1 "VBUS" H 3165 4473 50  0000 C CNN
F 2 "" H 3150 4300 50  0001 C CNN
F 3 "" H 3150 4300 50  0001 C CNN
	1    3150 4300
	1    0    0    -1  
$EndComp
Wire Wire Line
	3150 4300 3150 4350
Wire Wire Line
	1000 6050 1000 6100
$Comp
L power:GND #PWR017
U 1 1 60C882CB
P 3150 5500
F 0 "#PWR017" H 3150 5250 50  0001 C CNN
F 1 "GND" H 3155 5327 50  0000 C CNN
F 2 "" H 3150 5500 50  0001 C CNN
F 3 "" H 3150 5500 50  0001 C CNN
	1    3150 5500
	1    0    0    -1  
$EndComp
Wire Wire Line
	3150 5500 3150 5450
Wire Wire Line
	1000 4500 1000 4550
Wire Bus Line
	10950 700  10950 3300
Wire Bus Line
	7800 700  7800 1850
Wire Bus Line
	7800 2250 7800 3600
Wire Bus Line
	8100 1350 8100 3600
$EndSCHEMATC
