#include "font.h"

static uint8_t font[] = {
  /*       0     1     2     3      4     5     6     7      8     9     a     b      c     d     e     f */
  /*2*/ 0x00, 0xb0, 0x00, 0x00,  0x00, 0x00, 0x00, 0x20,  0x00, 0x00, 0x00, 0x00,  0x00, 0x01, 0x80, 0x00,  //  !      '       -.
  /*3*/ 0x7e, 0x30, 0x6d, 0x79,  0x33, 0x5b, 0x5f, 0x70,  0x7f, 0x7b, 0x00, 0x00,  0x00, 0x00, 0x00, 0x00,  // 0123 4567 89
  /*4*/ 0x00, 0x77, 0x1f, 0x0d,  0x3d, 0x4f, 0x47, 0x5e,  0x17, 0x10, 0x38, 0x57,  0x0e, 0x76, 0x15, 0x1d,  //  ABC DEFG HIJK LMNO
  /*5*/ 0x67, 0x73, 0x05, 0x5b,  0x0f, 0x1c, 0x3e, 0x3f,  0x37, 0x3b, 0x6d, 0x00,  0x00, 0x00, 0x00, 0x00,  // PQRS TUVW XYZ
};


uint8_t font_lookup(char c)
{
    size_t i = c;
    if (i < 0x20 || i >= 0x80) {
        return FONT_BLANK_GLYPH;
    }
    if (i >= 0x60) {
        i -= 0x20;
    }
    i -= 0x20;
    return font[i];
}

void font_render(uint8_t *out_glyphs, size_t glyph_count, const char *string)
{
    size_t i = 0;
    for (; i < glyph_count; i++) {
        if (string[i] == '\0') {
            break;
        } else {
            out_glyphs[i] = font_lookup(string[i]);
        }
    }
    for (; i < glyph_count; i++) {
        out_glyphs[i] = FONT_BLANK_GLYPH;
    }
}
